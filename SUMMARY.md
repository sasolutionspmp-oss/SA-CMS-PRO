SUMMARY SNAPSHOT â€” 2025-09-20T15:10Z (~320 words)

Documentation overhaul (Task 20) is committed and Task 19 now adds the regression foundation we will rely on as we march backwards through the backlog. On the backend side I introduced targeted pytest modules under `tests/unit/ingest/` and `tests/unit/metrics/` to lock down document parsing, classification, risk heuristics, and metrics normalisation. The parsing suite covers text/csv fallbacks, the PDF extraction hook, and snippet truncation logic; classifier tests validate the discipline, revision, and addendum detectors; risk flagger tests exercise a new `app/ingest/risk_flagger.py` utility that tags liquidated damages, bonding, no-substitution clauses, and extended warranties with line references. Metrics tests assert `normalize_metrics_payload` coerces project counts and sanitises deltas. All four test files run cleanly via `.venv\Scripts\python -m pytest tests/unit/ingest/test_parsing.py tests/unit/ingest/test_classifier.py tests/unit/ingest/test_risk_flagger.py tests/unit/metrics/test_metrics_normalizer.py`.

To support the new risk assertions I created `app/ingest/risk_flagger.py` with a dataclass-based API returning de-duplicated `RiskFlag` entries (code, message, line, snippet). The patterns currently cover our critical contract warnings and can be extended when Task 16 arrives. No other ingest code paths were touched.

On the frontend I wired Playwright into the toolchain (`@playwright/test`, `playwright.config.ts`, and scripts/test commands). The smoke scenario `tests/e2e/intake-workflow.spec.ts` currently focuses on verifying the client hits `/api/intake/launch` when an operator submits the intake form; the request is intercepted and fulfilled with stub data so the run stays hermetic. The test executes successfully with `pnpm run test` after installing the Chromium bundle through `pnpm exec playwright install chromium`. We can enrich the scenario later when the dashboard wiring (Tasks 4/5/17) is implemented.

Tracking artefacts are up to date: `TASKS.md` now shows Task 19 checked off with the current timestamp, and `PROGRESS.md` logs the pytest/Playwright runs. Next in the reverse sequence is Task 18 (dev/seed scripts). That will involve creating `scripts/dev.ps1` to orchestrate backend/frontend/worker processes and `scripts/seed.ps1` to push sample projects and uploads through the API. Once those scripts exist, we can continue marching toward the core backend features (ingest endpoints, parsing pipeline, etc.) with the new test harness guarding regressions.
